<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Crystal Game</title>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
</head>

<body>

    <div id="insructions">Click gemstones to total the displayed number.</div>
    <div id="newNumber">Match your score to: </div>
    <div id="tally"></div>
    <div id="gemClick">
        <button id="redgem">red</button>
        <button id="yellowgem">yellow</button>
        <button id="bluegem">blue</button>
        <button id="greengem">green</button>
    </div>
    <div id="currentScore">
        <span id="result"></span>
        Wins: <span id="wins"></span>
        Losses: <span id="losses"></span>
    </div>


    <script type="text/javascript">

        $(document).ready(function () {
            
            var glitteryGame = {
                wins: 0,
                losses: 0,
                sumtotal: 0,
                red: 0,
                yellow: 0,
                blue: 0,
                green: 0,

                checkScore: function () {
                    if (this.sumtotal === this.compNumber) {
                        this.wins++;
                        $("#result").html("You win!");
                        $("#wins").html(this.wins);
                        console.log("You won!");
                        this.sumtotal = 0;
                        this.randomize();
                    }

                    else if (this.sumtotal > this.compNumber) {
                        this.losses++;
                        $("#result").html("You loose!");
                        $("#losses").html(this.losses);
                        console.log("You loose!");
                        this.sumtotal = 0;
                        this.randomize();
                    }
                },

                randomize: function () {
                    this.compNumber = Math.floor(Math.random() * 120) + 19;
                    console.log("Computer number: " + this.compNumber);
                    $("#newNumber").html(this.compNumber);
                    this.red = Math.floor(Math.random() * 12) + 1;
                    $("redgemvalue").html(this.red);
                    this.yellow = Math.floor(Math.random() * 12) + 1;
                    this.blue = Math.floor(Math.random() * 12) + 1;
                    this.green = Math.floor(Math.random() * 12) + 1;
                    //console log values of each gem 
                    console.log("red: " + this.red);
                    console.log("yellow: " + this.yellow);
                    console.log("blue: " + this.blue);
                    console.log("green: " + this.green);
                }
            };

            glitteryGame.randomize();

            clicky("red", red);
            clicky("green", green);
            clicky("red", red);
            clicky("red", red);

            function clicky(gemColor) {
                $("#" + gemColor).on("click", function(){
                    var val = $("#" + gemColor + "value").html;
                    glitteryGame.sumtotal = glitteryGame.sumtotal + val;
                    console.log(glitteryGame.sumtotal);
                    $("#tally").html(glitteryGame.sumtotal);
                    glitteryGame.checkScore();
                });
            }

            $("#redgem").on("click", function () {
                glitteryGame.sumtotal = glitteryGame.sumtotal + glitteryGame.red;
                console.log(glitteryGame.sumtotal);
                $("#tally").html(glitteryGame.sumtotal);
                glitteryGame.checkScore();
            });

            $("#yellowgem").on("click", function () {
                glitteryGame.sumtotal = glitteryGame.sumtotal + glitteryGame.yellow;
                console.log(glitteryGame.sumtotal);
                $("#tally").html(glitteryGame.sumtotal);
                glitteryGame.checkScore();
            });

            $("#bluegem").on("click", function () {
                glitteryGame.sumtotal = glitteryGame.sumtotal + glitteryGame.green;
                console.log(glitteryGame.sumtotal);
                $("#tally").html(glitteryGame.sumtotal);
                glitteryGame.checkScore();
            });

            $("#greengem").on("click", function () {
                glitteryGame.sumtotal = glitteryGame.sumtotal + glitteryGame.blue;
                console.log(glitteryGame.sumtotal);
                $("#tally").html(glitteryGame.sumtotal);
                glitteryGame.checkScore();
            });
        }

        );

    </script>
</body>

</html>